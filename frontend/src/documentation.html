<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Nunito&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="synhi.css">
    <style>
        body {
            background-color: #222;
            color: lavender;
            font-family: 'Nunito', sans-serif;
            margin-left: 2in;
            margin-right: 3in;
        }
        h1 {
            margin-left: 0.1in;
        }
        h2 {
            margin-left: 0.3in;
        }
        h3, ol {
            margin-left: 0.5in;
        }
        h4, p {
            margin-left: 0.7in;
        }
        ul {
            margin-left: 0.3in;
        }
        h1, h2, h3, h4 {
            font-family: 'Fira Code', monospace;
        }
        div.code {
            white-space: pre;
            font-size: 12px;
            margin-left: 0.8in;
            width: fit-content;
            padding: 6px;
        }
        .code {
            font-family: 'Fira Code', monospace;
            background-color: black;
        }
        :link {
            color: #0000EE;
        }
        :visited {
            color: #884bc0; 
        }
    </style>

    <script src="formatting.js"></script>
</head>
<body>
    <h1>Lexica Documentation</h1>
    <h2>Table of Contents</h2>
    <div id="table-of-contents-container"></div>
    <h2>Sound Change Language</h2>
    <h3>Basics of the language</h3>
    <p>Comments are declared with a #</p>
    <div><pre>
#Hi! I'm a comment.</pre></div>
    <p>The program is divided into sections, with each section defining a certain thing about the program. Sections begin with a section header, a keyword specifying what section
       type this will be. Sections end with the <span class="code">end</span> keyword. Sections are typically indented but this is not required; whitespace is not significant.
    </p>
    <div><pre>
feature_def #Begin feature def section
    ...
end #End feature def section

symbols #Begin symbols section
    ...</pre></div>
    <h3>Features</h3>
    <h4>Technical Details</h4>
    <p>The datatype underlying all of the sound changer's actions is the feature. It is represented as a 64-bit bitmask (u64). Each feature is given an an area in that bitmask 
       to use. The area generation is automated but not 100% efficient. There are several rules it must follow when laying out features and the brute-force approach I
       implemented is not 100% efficient at laying things out.</p>
    <p>The chief difficulty in layout comes from the switch feature type. I implemented this because it felt strange having all features apply to all characters, after all the
       kinds of features in a vowel and in a consonant are very different. The switch type allows features to have a non-root parent, making features into a tree. Since it is
       bitmask based, that means that the features must be defined with no ambiguity by the bitmask, and that if the same feature has multiple parents, it lines up the same
       across all parents. Another issue is overlapping multi features, which requires more adjustment. The ineffiecencies aren't an issue; a fairly deatiled IPA implementation
       is well within a u64 and if it really became an issue I could move to u128.</p>
    <h4>Types of features</h4>
    <p>There are two main kinds of features, switch features and regular features. Switch features are similar to regular features except other features can apply only to certain
       features in a switch feature. In addition, features can be of a set of values, or they can be boolean. For example, manner of articulation would be of a set, whereas
       voicing would be boolean.</p>
    <h4>Defining Features</h4>
    <p>Features are defined in the <span class="code">feature_def</span> section. Each feature line has 3 parts - the <span class="code">feature</span> keyword, the feature
       definition itself, and the parent node. The parent node is used to make features apply only to certain switch type features. If you wish your feature to apply to
       everything, use either <span class="code">root</span> or <span class="code">all</span>. They are identical. The feature definition itself can take many forms. I will
       first show the boolean feature.</p>
    <div><pre>
feature_def
    feature +foo root
end</pre></div>
    <p>That code snippet creates a feature named +foo. Every letter will either not have the feature, called the absent value, and marked with -foo, or it will have the value
       present, marked with +foo. The absent value is the default.</p>
       <div><pre>
    feature foo(bar, baz, boo) root</pre></div>
    <p>That code snippet creates a feature named foo. It can have any of three values, bar, baz, or boo. The first value is selected as the default value.</p>
    <div><pre>
    switch foo(bar, baz, boo) root</pre></div>
    <p>To make a feature into a switch feature, just change the <span class="code">feature</span> keyword into the <span class="code">switch</span> keyword. This also creates a
       feature called foo with three values, bar, baz, or boo, but this feature can have other features parented to it. Otherwise it works exactly the same.</p>
    <div><pre>
feature_def
    switch foo(bar, baz, boo) root
    feature +ghost boo
end</pre></div>
    <p>In this code snippet, a boolean feature, +ghost, is created but only applies to the boo feature. Notice the second parameter, <span class="code">boo</span>. A bar 
       feature doesn't have that value, it cannot have that value. In this case our progam has 4 possible symbols: <span class="code">[bar]</span>,
       <span class="code">[baz]</span>, <span class="code">[boo -ghost]</span>, and <span class="code">[boo +ghost]</span>. (Brackets are used to represent feature matrices.)</p>
    <div><pre>
feature_def
    switch foo(bar, baz, boo) root
    feature +zombie foo!boo
end</pre></div>
    <p>In that code snippet, the +zombie feature applies to every subtype of foo <i>except</i> for boo.</p>
    <p>Putting it all together, below is a the full default implementation of the IPA features. It's also a good starting point anytime you are making a language.</p>
    <div><pre>
feature_def
    switch type(consonant, vowel) root

    feature +voice consonant
    switch manner(plosive, nasal, fricative, approximant, affricate, trill, tap) consonant
    switch place(bilabial, labiodental, dental, alveolar, postalveolar, retroflex, palatal, velar, uvular, pharyngeal, glottal) consonant
    feature +lateral (fricative, approximant)
    feature +ejective consonant
    feature +syllabic consonant

    feature +aspirated consonant!glottal
    feature +labialized consonant!bilabial
    feature +velarized consonant!velar
    feature +palatalized consonant!palatal
    feature +pharyngealized consonant!pharyngeal

    feature +nasal-release plosive

    feature +round vowel
    feature closeness(close, close-mid, mid-close, open-mid, open) vowel
    feature backness(front, mid-back, back) vowel
    feature +rhoticized vowel

    feature +long all
    feature +nasal all
    feature +breathy all
end</pre></div>
    <p>Notice how consonant properties (PoA, MoA) only apply to consonants, and same for vowels. Also notice that you can't velarize a velar consonant, etc.</p>
    <h3>Symbols</h3>
    <p>Symbols the translation layer between your program and human readable notation. Symbols are used in two slightly different ways in multiple places. Symbols strictly
       match when converting into sound change languages (i.e. word input or rule results) and less strictly match when using them for checking (predicates and enviorments).
       Symbols also strictly match when outputting into human readable format.</p>
    <p>Symbols are defined in the <span class="code">symbols</span> section. Each symbol line has 3 parts - the symbol keyword, the symbolitself, and the feature matrix. The
       symbol itself is the actual symbol that will get used in other parts of the code. This is currently just a single character but I plan to increase that. The feature matrix
       defines the symbol. Symbols will always match with what you specify, but for things left as their defaults, they will only matter if the symbol is strictly matching.</p>
    <div><pre>
symbols
    symbol i [close front -round]
end</pre></div>
    <p>That creates the i symbol and assigns it to be close, front and unrounded. When strictly matching, it will also need to be -long, -nasal, -breathy, etc because those 
       are the defaults (assuming default IPA implementation). However, when not strictly matching, the length etc. does not matter.</p>
    <p>Sample symbol definitions for the IPA, designed to work with the above sample IPA feature definitions:</p>
    <div><pre>
symbols
    symbol i [close front -round]
    symbol y [close front +round]
    symbol ɨ [close mid-back -round]
    symbol ʉ [close mid-back +round]
    symbol ɯ [close back -round]
    symbol u [close back +round]

    symbol e [close-mid front -round]
    symbol ø [close-mid front +round]
    symbol ɘ [close-mid mid-back -round]
    symbol ɵ [close-mid mid-back +round]
    symbol ɤ [close-mid back -round]
    symbol o [close-mid back +round]

    symbol ə [mid-close mid-back]

    symbol ɛ [open-mid front -round]
    symbol œ [open-mid front +round]
    symbol ɜ [open-mid mid-back -round]
    symbol ɞ [open-mid mid-back +round]
    symbol ʌ [open-mid back -round]
    symbol ɔ [open-mid back +round]

    symbol a [open front -round]
    symbol ɶ [open front +round]
    symbol ɑ [open back -round]
    symbol ɒ [open back +round]


    symbol p [-voice bilabial plosive]
    symbol b [+voice bilabial plosive]
    symbol t [-voice alveolar plosive]
    symbol d [+voice alveolar plosive]
    symbol ʈ [-voice retroflex plosive]
    symbol ɖ [+voice retroflex plosive]
    symbol c [-voice palatal plosive]
    symbol ɟ [+voice palatal plosive]
    symbol k [-voice velar plosive]
    symbol g [+voice velar plosive]
    symbol q [-voice uvular plosive]
    symbol ɢ [+voice uvular plosive]
    symbol ʔ [-voice glottal plosive]

    symbol ɸ [-voice bilabial fricative]
    symbol β [+voice bilabial fricative]
    symbol f [-voice labiodental fricative]
    symbol v [+voice labiodental fricative]
    symbol θ [-voice dental fricative]
    symbol ð [+voice dental fricative]
    symbol s [-voice alveolar fricative]
    symbol ɬ [-voice alveolar fricative +lateral]
    symbol z [+voice alveolar fricative]
    symbol ɮ [+voice alveolar fricative +lateral]
    symbol ʃ [-voice postalveolar fricative]
    symbol ʒ [+voice postalveolar fricative]
    symbol ʂ [-voice retroflex fricative]
    symbol ʐ [+voice retroflex fricative]
    symbol ç [-voice palatal fricative]
    symbol ʝ [+voice palatal fricative]
    symbol x [-voice velar fricative]
    symbol ɣ [+voice velar fricative]
    symbol χ [-voice uvular fricative]
    symbol ʁ [+voice uvular fricative]
    symbol ħ [-voice pharyngeal fricative]
    symbol ʕ [+voice pharyngeal fricative]
    symbol h [-voice glottal fricative]
    symbol ɦ [+voice glottal fricative]

    symbol m [+voice bilabial nasal]
    symbol ɱ [+voice labiodental nasal]
    symbol n [+voice alveolar nasal]
    symbol ɳ [+voice retroflex nasal]
    symbol ɲ [+voice palatal nasal]
    symbol ŋ [+voice velar nasal]
    symbol ɴ [+voice uvular nasal]

    symbol ʙ [+voice bilabial trill]
    symbol r [+voice alveolar trill]
    symbol ʀ [+voice uvular trill]

    symbol ⱱ [+voice labiodental tap]
    symbol ɾ [+voice alveolar tap]
    symbol ɽ [+voice retroflex tap]

    symbol ʋ [+voice labiodental approximant]
    symbol ɹ [+voice alveolar approximant]
    symbol l [+voice alveolar approximant +lateral]
    symbol ɻ [+voice retroflex approximant]
    symbol ɭ [+voice retroflex approximant +lateral]
    symbol j [+voice palatal approximant]
    symbol ʎ [+voice palatal approximant +lateral]
    symbol ɰ [+voice velar approximant]
    symbol ʟ [+voice velar approximant +lateral]

    #Not strictly correct but close enough
    symbol w [+voice bilabial approximant]
end</pre></div>
    <h2>Spreadsheet Program</h2>
    

    <script defer>
        format_code_blocks();
        generate_table_of_contents();
        generate_indent_lines();
    </script>
</body>
</html>

